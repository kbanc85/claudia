# Obsidian-Like Document Browser: Design Spec

*A lightweight, read-only knowledge browser built into Claudia Desktop. Inspired by Obsidian, scoped for one developer.*

---

## Why This Matters

Claudia's PARA vault generates markdown files with wiki-style backlinks, index files, and canvas files. These files are the human-readable output of Claudia's knowledge -- your second brain in plain text. But without a viewer, users have to install Obsidian separately to browse them.

The document browser brings this inside the app. It's not a replacement for Obsidian (which is a full-featured editor with plugins). It's a focused viewer that makes your knowledge browsable without leaving Claudia.

---

## Design Principles

1. **Read-only.** No editing. The vault is auto-generated by the memory daemon. Users who want to edit open in Obsidian (the vault is already Obsidian-compatible). This keeps scope manageable.

2. **Navigation-first.** The primary interaction is browsing: click a folder, click a file, click a wiki-link to jump to another file. Fast, fluid, no friction.

3. **Connected to memory.** When viewing a person's profile, also show their memory-backed data (attention tier, contact velocity, recent memories). The document is the anchor; memory is the context.

4. **Lightweight.** No plugin system, no custom themes, no YAML frontmatter parsing, no Dataview queries. Just markdown rendering with backlinks.

---

## Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [< >]  ğŸ“ Relationships / people / Sarah Chen.md     [âŸ³]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                          â”‚                   â”‚
â”‚  PARA Tree   â”‚    Document View         â”‚   Context Panel   â”‚
â”‚              â”‚                          â”‚                   â”‚
â”‚  â–¼ Active/   â”‚  # Sarah Chen            â”‚  â”€â”€ Backlinks â”€â”€  â”‚
â”‚    project-x â”‚                          â”‚                   â”‚
â”‚    project-y â”‚  **Role:** VP Eng @ Acme â”‚  MOC-People.md    â”‚
â”‚  â–¼ Relations â”‚  **Tier:** 1 (Active)    â”‚  project-x.md     â”‚
â”‚    â–¼ people/ â”‚  **Since:** 2024-03      â”‚  meeting-jan15.md  â”‚
â”‚      Alice   â”‚                          â”‚                   â”‚
â”‚    â–º Sarah â—„ â”‚  ## Recent Context       â”‚  â”€â”€ From Memory â”€ â”‚
â”‚      Bob     â”‚                          â”‚                   â”‚
â”‚    â–º orgs/   â”‚  - Discussed budget      â”‚  Tier: 1 (Active) â”‚
â”‚  â–º Reference â”‚    proposal on Feb 10    â”‚  Velocity: Stable  â”‚
â”‚  â–º Archive/  â”‚  - Committed to send     â”‚  Strength: 0.82   â”‚
â”‚  â–º Desk/     â”‚    revised numbers by    â”‚  Last: 3 days ago â”‚
â”‚              â”‚    Friday [[Feb 14]]     â”‚                   â”‚
â”‚  â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„  â”‚                          â”‚  â”€â”€ Commitments â”€ â”‚
â”‚  Quick Jump  â”‚  ## Connections           â”‚                   â”‚
â”‚  [Cmd+O]     â”‚                          â”‚  Send revised     â”‚
â”‚              â”‚  - Works with [[Alice]]  â”‚  budget (Feb 14)  â”‚
â”‚              â”‚  - Reports to [[Bob]]    â”‚  âš  Due tomorrow   â”‚
â”‚              â”‚                          â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Left Panel: PARA Tree

- Collapsible folder structure matching the vault layout
- Root folders: Active, Relationships, Reference, Archive, Claudia's Desk
- Files sorted by last modified within each folder
- Quick filter/search at top of panel (fuzzy match on filename)
- Current file highlighted in tree
- Folder counts (e.g., "people (23)")
- Double-click folder to expand/collapse
- Single-click file to open in center panel

### Center Panel: Document View

- Markdown renderer (read-only)
- **Wiki-links** (`[[Sarah Chen]]`) rendered as clickable links that navigate within the browser
- **Standard markdown:** headings, bold, italic, lists, code blocks, tables, checklists, blockquotes
- **Scroll position remembered** per file (so navigating back restores position)
- **Breadcrumb trail** at top showing path: `Relationships > people > Sarah Chen.md`
- **No YAML frontmatter display** -- render content only (frontmatter is for Obsidian/Claudia internals)
- **Image rendering** for any embedded images (screenshots, diagrams)
- **Forward/back navigation** (browser-style) for wiki-link traversal

### Right Panel: Context Panel (Collapsible)

Two sections, both driven by memory:

**Backlinks:**
- Every vault file that contains a `[[link]]` to the current file
- Grouped by folder (Active, Relationships, etc.)
- Click to navigate

**From Memory:**
- Entity data pulled from `memory.about` for the current file's entity
- For people: attention tier, contact velocity, relationship strength, last interaction
- For projects: status, related entities, open commitments
- For any entity: recent memories mentioning it (last 5, with timestamps)
- Commitments related to this entity (with due dates and urgency)

The context panel is the bridge between the static vault files and the live memory system.

### Quick Switcher (Cmd+O)

- Modal overlay with fuzzy search across all vault files
- Results ranked by: exact match > prefix match > substring match > fuzzy match
- Shows file path below each result for disambiguation
- Enter to open, Escape to dismiss
- Same keyboard shortcut as Obsidian for familiarity

---

## What to Render

### Supported Markdown

| Feature | Support | Notes |
|---------|---------|-------|
| Headings (h1-h6) | Yes | Standard |
| Bold, italic, strikethrough | Yes | Standard |
| Bullet/numbered lists | Yes | Including nested |
| Checklists | Yes | `- [ ]` and `- [x]`, display only (no toggling) |
| Code blocks (fenced) | Yes | Syntax highlighting with Prism or Shiki |
| Inline code | Yes | Standard |
| Tables | Yes | GFM tables |
| Blockquotes | Yes | Standard |
| Horizontal rules | Yes | Standard |
| Images | Yes | Local file paths and data URIs |
| Wiki-links `[[name]]` | Yes | Core feature -- clickable navigation |
| External links | Yes | Open in default browser |
| Mermaid diagrams | No | Out of scope |
| LaTeX math | No | Out of scope |
| Embeds/transclusion | No | Out of scope |
| Dataview queries | No | Obsidian plugin, not applicable |

### Wiki-Link Resolution

When a user clicks `[[Sarah Chen]]`:
1. Search vault files for exact filename match (`Sarah Chen.md`)
2. If not found, search for case-insensitive match
3. If not found, search for files containing the link text in their title
4. If not found, show "File not found" tooltip (don't break navigation)

Wiki-links with aliases (`[[Sarah Chen|Sarah]]`) should display the alias but navigate to the target.

---

## Implementation Approach

### Technology

- **React component** within Rowboat's existing React/TailwindCSS/Radix UI stack
- **Markdown rendering:** `react-markdown` with `remark-gfm` for GFM support
- **Syntax highlighting:** `rehype-prism-plus` or `shiki` for code blocks
- **Wiki-link parsing:** Custom remark plugin to detect `[[...]]` patterns and convert to clickable links
- **File system access:** Via Electron IPC (main process reads vault directory, sends file list and content to renderer)
- **Memory data:** Via `claudia:memory:about` and `claudia:memory:entities` IPC channels

### Performance Considerations

- **File list caching:** Read vault directory once on page mount, refresh on vault sync events
- **Lazy content loading:** Only read file content when selected (don't preload all files)
- **Backlink indexing:** Build backlink index on first load by scanning all files for `[[...]]` patterns. Cache in memory. Refresh on vault sync.
- **Debounced search:** Quick filter and Cmd+O search should debounce input (200ms)

### Vault Sync Integration

The document browser is read-only, but it should reflect the latest vault state:

1. When `memory.vault` sync runs (manually or on schedule), the browser refreshes its file list
2. A small "syncing..." indicator shows during active sync
3. After sync, any currently-open file is re-rendered (in case content changed)
4. New files appear in the tree without requiring page reload

---

## What This Is NOT

- **Not an Obsidian replacement.** No editing, no plugins, no graph view (that's the separate Graph page), no community themes.
- **Not a generic file browser.** This only browses the PARA vault, not arbitrary filesystem paths.
- **Not a full markdown editor.** Read-only. Users who want to edit open in Obsidian. The vault is already Obsidian-compatible.
- **Not Notion.** No blocks, no databases, no drag-and-drop reorganization. Files are auto-generated.

---

## Interaction with Other Pages

The document browser connects to other Claudia Desktop pages:

| From document browser | Navigate to |
|----------------------|-------------|
| Click person entity in context panel | People page (detail view) |
| Click commitment in context panel | Commitments page (filtered to that commitment) |
| Click "View in graph" action | Graph page (centered on this entity) |
| Click external link in markdown | Default browser |
| Click wiki-link to vault file | Same page (document browser, new file) |

| From other pages | Navigate to document browser |
|-----------------|------------------------------|
| People page: "View vault file" | Document browser with person's file open |
| Graph page: click node, "View notes" | Document browser with entity's file open |
| Memory browser: result has vault file | Document browser with linked file open |

---

## Phase Placement

This should be part of **Phase 2 (Memory UI Pages)**, expanded from the current 5 bullet points in Section 6.6. It's more work than the current PRD suggests, but it's core to the "your knowledge, browsable" story.

Estimated effort: 1-2 weeks for the full implementation (tree, renderer, backlinks, context panel, quick switcher).
